<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us">
<head xmlns:xs="http://www.w3.org/2001/XMLSchema"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="DC.Type" content="reference">
<meta name="DC.Title" content="opagentopology">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="GUID-658121D4-0092-4CBC-87C7-22E2E7EEB7F1">
<meta name="DC.Language" content="en-US">
<link rel="stylesheet" type="text/css" href="commonltr.css">
<link rel="stylesheet" type="text/css" href="intelltr.css">
<title>opagentopology</title>
</head>
<body class="man8" id="GUID-658121D4-0092-4CBC-87C7-22E2E7EEB7F1"><a name="GUID-658121D4-0092-4CBC-87C7-22E2E7EEB7F1"><!-- --></a>
<div id="custom-header" style="text-align:right">
	<img src="intel_logo.png">
</div>
 
  <h1 class="title topictitle1">opagentopology</h1>
 
  <div class="body refbody"> 
    <div class="section" id="GUID-658121D4-0092-4CBC-87C7-22E2E7EEB7F1__GUID-55F35BFC-D6E8-4C4A-A781-1D1BAB4FA44F"><a name="GUID-658121D4-0092-4CBC-87C7-22E2E7EEB7F1__GUID-55F35BFC-D6E8-4C4A-A781-1D1BAB4FA44F"><!-- --></a> 
      <p class="p">Generates sample topology verification XML. Provides an example of
        using 
        <samp class="ph codeph">opaxmlgenerate</samp> and is a prototype for customization. 
      </p>
 
      <p class="p">Uses CSV input files 
        <span class="ph filepath">opatopology_links.txt</span>, 
        <span class="ph filepath">opatopology_FIs.txt</span>, and 
        <span class="ph filepath">opatopology_SWs.txt</span> to generate LinkSummary, Node
        FIs, and Node SWs information respectively. These files are samples of what
        might be produced as part of translating a user custom file format into
        temporary intermediate CSV files. 
      </p>
 
      <p class="p">LinkSummary information includes Link, Cable, and Port information.
        Note that 
        <samp class="ph codeph">opagentopology</samp> (not 
        <samp class="ph codeph">opaxmlgenerate</samp>) generates the XML version string as
        well as the 
        <samp class="ph codeph">&lt;Topology&gt;</samp> and 
        <samp class="ph codeph">&lt;LinkSummary&gt;</samp> lines. Also note that the indent
        level is at the default value of zero (0). The portions of the script that call
        
        <samp class="ph codeph">opaxmlgenerate</samp> follow: 
      </p>
 
      <pre class="pre codeblock">opaxmlgenerate -X /opt/opa/samples/opatopology_1.txt -d \; -h Link -g Rate -g
Rate_Int -g MTU -g LinkDetails -h Cable -g CableLength -g CableLabel -g
CableDetails -e Cable -h Port -g NodeGUID -g PortNum -g NodeDesc -g PortGUID -g
NodeType -g NodeType_Int -g PortDetails -e Port -h Port -g NodeGUID -g PortNum -g
NodeDesc -g PortGUID -g NodeType -g NodeType_Int -g PortDetails -e Port -e Link

opaxmlgenerate -X /opt/opa/samples/opatopology_2.txt -d \; -h Node -g NodeGUID -g
NodeDesc -g NodeDetails -g HostName -g NodeType -g NodeType_Int -g NumPorts -e Node</pre>
 
    </div>
 
    <div class="section" id="GUID-658121D4-0092-4CBC-87C7-22E2E7EEB7F1__XX1133027"><a name="GUID-658121D4-0092-4CBC-87C7-22E2E7EEB7F1__XX1133027"><!-- --></a><h2 class="title sectiontitle">opatopology_links.txt</h2> 
       
      <p class="p">This file can be found in 
        <span class="ph filepath">/opt/opa/samples/</span>. For brevity, this sample shows
        only two links. The second link shows an example of omitting some information.
        In the second line, the MTU, LinkDetails, and other fields are not present,
        which is indicated by an empty value for the field (no entry between the
        semicolon delimiters). 
      </p>
 
      <div class="note note" id="GUID-658121D4-0092-4CBC-87C7-22E2E7EEB7F1__GUID-C389BB2C-5EA2-4EDF-9BA0-A683C705BEE8"><a name="GUID-658121D4-0092-4CBC-87C7-22E2E7EEB7F1__GUID-C389BB2C-5EA2-4EDF-9BA0-A683C705BEE8"><!-- --></a><span class="notetitle">Note:</span>  
        <p class="p">The following example exceeds the available width of the page. For
          readability, a blank line is shown between lines to make it clear where the
          line ends. In an actual link file, no blank lines are used. 
        </p>
 
      </div>
 
      <pre class="pre codeblock">25g;2048;0;IO Server Link;11m;S4567;cable model 456;0x0002c9020020e004;1;bender HFI-1;0x0002c9020020e004;FI;Some info about port;0x0011750007000df6;7;Switch 1234 Leaf 4;;SW;

25g;;0;;;;;0x0002c9020025a678;1;mindy2 HFI-1;;FI;;0x0011750007000e6d;4;Switch 2345 Leaf 5;;SW;</pre>
 
    </div>
 
    <div class="section" id="GUID-658121D4-0092-4CBC-87C7-22E2E7EEB7F1__XX1133034"><a name="GUID-658121D4-0092-4CBC-87C7-22E2E7EEB7F1__XX1133034"><!-- --></a><h2 class="title sectiontitle">opatopology_FIs.txt</h2> 
       
      <p class="p">This file can be found in 
        <span class="ph filepath">/opt/opa/samples/</span>. For brevity, this sample shows
        only two nodes. 
      </p>
 
      <pre class="pre codeblock">0x0002c9020020e004;bender HFI-1;More details about node
0x0002c9020025a678;mindy2 HFI-1;Node details</pre>
 
    </div>
 
    <div class="section" id="GUID-658121D4-0092-4CBC-87C7-22E2E7EEB7F1__XX1197582"><a name="GUID-658121D4-0092-4CBC-87C7-22E2E7EEB7F1__XX1197582"><!-- --></a><h2 class="title sectiontitle">opatopology_SWs.txt</h2> 
       
      <p class="p">This file can be found in 
        <span class="ph filepath">/opt/opa/samples/</span>. For brevity, this sample shows
        only two nodes. 
      </p>
 
      <pre class="pre codeblock">0x0011750007000df6;Switch 1234 Leaf 4;
0x0011750007000e6d;Switch 2345 Leaf 5;</pre>
 
    </div>
 
    <div class="section" id="GUID-658121D4-0092-4CBC-87C7-22E2E7EEB7F1__XX1197591"><a name="GUID-658121D4-0092-4CBC-87C7-22E2E7EEB7F1__XX1197591"><!-- --></a><h2 class="title sectiontitle">opatopology_SMs.txt</h2> 
       
      <p class="p">This file can be found in 
        <span class="ph filepath">/opt/opa/samples/</span>. For brevity, this sample shows
        only one node. 
      </p>
 
      <pre class="pre codeblock">0x0002c9020025a678;1;mindy2 HFI-1;0x0011750007000e6d;FI;details about SM</pre>
 
    </div>
 
    <div class="section" id="GUID-658121D4-0092-4CBC-87C7-22E2E7EEB7F1__SECTION_B98F70FE471F4369B29E5C18D5774BC8"><a name="GUID-658121D4-0092-4CBC-87C7-22E2E7EEB7F1__SECTION_B98F70FE471F4369B29E5C18D5774BC8"><!-- --></a><h2 class="sectiontitle">Example </h2> 
      <p class="p">When run against the supplied topology input files, 
        <samp class="ph codeph">opagentopology</samp> produces: 
      </p>
 
      <pre class="pre codeblock">&lt;?xml version="1.0" encoding="utf-8" ?&gt;
&lt;Topology&gt;
&lt;LinkSummary&gt;
&lt;Link&gt;
&lt;Rate&gt;25g&lt;/Rate&gt;
&lt;MTU&gt;2048&lt;/MTU&gt;
&lt;Internal&gt;0&lt;/Internal&gt;
&lt;LinkDetails&gt;IO Server Link&lt;/LinkDetails&gt;
&lt;Cable&gt;
&lt;CableLength&gt;11m&lt;/CableLength&gt;
&lt;CableLabel&gt;S4567&lt;/CableLabel&gt;
&lt;CableDetails&gt;cable model 456&lt;/CableDetails&gt;
&lt;/Cable&gt;
&lt;Port&gt;
&lt;NodeGUID&gt;0x0002c9020020e004&lt;/NodeGUID&gt;
&lt;PortNum&gt;1&lt;/PortNum&gt;
&lt;NodeDesc&gt;bender HFI-1&lt;/NodeDesc&gt;
&lt;PortGUID&gt;0x0002c9020020e004&lt;/PortGUID&gt;
&lt;NodeType&gt;FI&lt;/NodeType&gt;
&lt;PortDetails&gt;Some info about port&lt;/PortDetails&gt;
&lt;/Port&gt;
&lt;Port&gt;
&lt;NodeGUID&gt;0x0011750007000df6&lt;/NodeGUID&gt;
&lt;PortNum&gt;7&lt;/PortNum&gt;
&lt;NodeDesc&gt;Switch 1234 Leaf 4&lt;/NodeDesc&gt;
&lt;NodeType&gt;SW&lt;/NodeType&gt;
&lt;/Port&gt;
&lt;/Link&gt;
&lt;Link&gt;
&lt;Rate&gt;25g&lt;/Rate&gt;
&lt;Internal&gt;0&lt;/Internal&gt;
&lt;Cable&gt;
&lt;/Cable&gt;
&lt;Port&gt;
&lt;NodeGUID&gt;0x0002c9020025a678&lt;/NodeGUID&gt;
&lt;PortNum&gt;1&lt;/PortNum&gt;
&lt;NodeDesc&gt;mindy2 HFI-1&lt;/NodeDesc&gt;
&lt;NodeType&gt;FI&lt;/NodeType&gt;
&lt;/Port&gt;
&lt;Port&gt;
&lt;NodeGUID&gt;0x0011750007000e6d&lt;/NodeGUID&gt;
&lt;PortNum&gt;4&lt;/PortNum&gt;
&lt;NodeDesc&gt;Switch 2345 Leaf 5&lt;/NodeDesc&gt;
&lt;NodeType&gt;SW&lt;/NodeType&gt;
&lt;/Port&gt;
&lt;/Link&gt;
&lt;/LinkSummary&gt;
&lt;Nodes&gt;
&lt;FIs&gt;
&lt;Node&gt;
&lt;NodeGUID&gt;0x0002c9020020e004&lt;/NodeGUID&gt;
&lt;NodeDesc&gt;bender HFI-1&lt;/NodeDesc&gt;
&lt;NodeDetails&gt;More details about node&lt;/NodeDetails&gt;
&lt;/Node&gt;
&lt;Node&gt;
&lt;NodeGUID&gt;0x0002c9020025a678&lt;/NodeGUID&gt;
&lt;NodeDesc&gt;mindy2 HFI-1&lt;/NodeDesc&gt;
&lt;NodeDetails&gt;Node details&lt;/NodeDetails&gt;
&lt;/Node&gt;
&lt;/FIs&gt;
&lt;Switches&gt;
&lt;Node&gt;
&lt;NodeGUID&gt;0x0011750007000df6&lt;/NodeGUID&gt;
&lt;NodeDesc&gt;Switch 1234 Leaf 4&lt;/NodeDesc&gt;
&lt;/Node&gt;
&lt;Node&gt;
&lt;NodeGUID&gt;0x0011750007000e6d&lt;/NodeGUID&gt;
&lt;NodeDesc&gt;Switch 2345 Leaf 5&lt;/NodeDesc&gt;
&lt;/Node&gt;
&lt;/Switches&gt;
&lt;SMs&gt;
&lt;SM&gt;
&lt;NodeGUID&gt;0x0002c9020025a678&lt;/NodeGUID&gt;
&lt;PortNum&gt;1&lt;/PortNum&gt;
&lt;NodeDesc&gt;mindy2 HFI-1&lt;/NodeDesc&gt;
&lt;PortGUID&gt;0x0011750007000e6d&lt;/PortGUID&gt;
&lt;NodeType&gt;FI&lt;/NodeType&gt;
&lt;SMDetails&gt;details about SM&lt;/SMDetails&gt;
&lt;/SM&gt;
&lt;/SMs&gt;
&lt;/Nodes&gt;
&lt;/Topology&gt;</pre>
 
    </div>
 
  </div>
 
<div xmlns:xs="http://www.w3.org/2001/XMLSchema" id="custom-footer"><hr><p class="copyright-notice">*Other names and brands may be claimed as the property of others.</p><p class="copyright-notice">Revised: January 2016</p><p class="copyright-notice">Copyright Â© 2016 Intel Corporation. All rights reserved.</p></div>
</body>
</html>