<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us">
<head xmlns:xs="http://www.w3.org/2001/XMLSchema"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="DC.Type" content="reference">
<meta name="DC.Title" content="opafabricinfo">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="GUID-50AADE23-2E06-4177-AFDE-520CE997B1C1">
<meta name="DC.Language" content="en-US">
<link rel="stylesheet" type="text/css" href="commonltr.css">
<link rel="stylesheet" type="text/css" href="intelltr.css">
<title>opafabricinfo</title>
</head>
<body class="man1" id="GUID-50AADE23-2E06-4177-AFDE-520CE997B1C1"><a name="GUID-50AADE23-2E06-4177-AFDE-520CE997B1C1"><!-- --></a>
<div id="custom-header" style="text-align:right">
	<img src="intel_logo.png">
</div>
 
  <h1 class="title topictitle1">opafabricinfo</h1>
 
  <div class="body refbody"> 
    <div class="section" id="GUID-50AADE23-2E06-4177-AFDE-520CE997B1C1__GUID-E4DBBE4B-B637-4EA8-9173-7108EED9D7D2"><a name="GUID-50AADE23-2E06-4177-AFDE-520CE997B1C1__GUID-E4DBBE4B-B637-4EA8-9173-7108EED9D7D2"><!-- --></a> 
      <p class="p">Provides a brief summary of the components in the fabric, using the
        first active port on the given local host to perform its analysis. 
        <samp class="ph codeph">opafabricinfo</samp> is supplied in both: 
      </p>
 
      <a name="GUID-50AADE23-2E06-4177-AFDE-520CE997B1C1__UL_DABDCCC4721B4F469A383B2418851029"><!-- --></a><ul class="ul" id="GUID-50AADE23-2E06-4177-AFDE-520CE997B1C1__UL_DABDCCC4721B4F469A383B2418851029"> 
        <li class="li" id="GUID-50AADE23-2E06-4177-AFDE-520CE997B1C1__LI_FC5EB3515CF14888A5D27E26FCA4A253"><a name="GUID-50AADE23-2E06-4177-AFDE-520CE997B1C1__LI_FC5EB3515CF14888A5D27E26FCA4A253"><!-- --></a> 
          <p class="p"><span class="ph">Intel<sup>®</sup> Omni-Path
          Fabric Suite FastFabric</span> Toolset 
          </p>
 
          <p class="p">In this situation, the command can manage more than one fabric
            (subnet). 
          </p>
 
        </li>
 
        <li class="li" id="GUID-50AADE23-2E06-4177-AFDE-520CE997B1C1__LI_6032D783616D490A9598A70ACB6E3F10"><a name="GUID-50AADE23-2E06-4177-AFDE-520CE997B1C1__LI_6032D783616D490A9598A70ACB6E3F10"><!-- --></a> 
          <p class="p"><span class="ph">FastFabric</span> Tools 
          </p>
 
          <p class="p">In this situation, the command performs analysis against the first
            active port on the system only. It takes no options and uses no environment
            variables. 
          </p>
 
        </li>
 
      </ul>
 
      <p class="p"><samp class="ph codeph">opafabricinfo</samp> can be very useful as a quick
        assessment of the fabric state. It can be run against a known good fabric to
        identify its components and then later run to see if anything has changed about
        the fabric configuration or state. 
      </p>
 
      <p class="p">For more extensive fabric analysis, use 
        <a class="xref" href="GUID-03910E5A-245C-4F29-A84D-5D9872BBE30C.html#GUID-03910E5A-245C-4F29-A84D-5D9872BBE30C">opareport</a>
        and 
        <a class="xref" href="GUID-8279CC02-DA4A-4316-A6CF-616B7FCE29B1.html#GUID-8279CC02-DA4A-4316-A6CF-616B7FCE29B1">opareports</a>.
        Also see 
        <samp class="ph codeph">opatop</samp> in the 
        <span class="ph"><em class="ph i">Intel<sup>®</sup> Omni-Path
            Fabric Suite FastFabric User Guide</em></span>. 
      </p>
 
    </div>
 
    <div class="section refsyn" id="GUID-50AADE23-2E06-4177-AFDE-520CE997B1C1__GUID-D2D4714B-B456-4D44-B04E-41A601118E80"><a name="GUID-50AADE23-2E06-4177-AFDE-520CE997B1C1__GUID-D2D4714B-B456-4D44-B04E-41A601118E80"><!-- --></a><h2 class="sectiontitle">Syntax</h2> 
      <pre class="pre codeblock">opafabricinfo [-t <var class="keyword varname">portsfile</var>] [-p <var class="keyword varname">ports</var>]</pre>
 
      <p class="p">or 
      </p>
 
      <pre class="pre codeblock">opafabricinfo --help</pre>
 
    </div>
 
    <div class="section" id="GUID-50AADE23-2E06-4177-AFDE-520CE997B1C1__XX1146888"><a name="GUID-50AADE23-2E06-4177-AFDE-520CE997B1C1__XX1146888"><!-- --></a><h2 class="sectiontitle">Options </h2> 
      <a name="GUID-50AADE23-2E06-4177-AFDE-520CE997B1C1__GUID-54E57040-A8F7-4A36-9C71-B53EB76081B9"><!-- --></a><dl class="dl parml" id="GUID-50AADE23-2E06-4177-AFDE-520CE997B1C1__GUID-54E57040-A8F7-4A36-9C71-B53EB76081B9"> 
         
          <dt class="dt pt dlterm"><samp class="ph codeph">--help</samp> 
          </dt>
 
          <dd class="dd pd">Produces full help text. 
          </dd>
 
         
         
          <dt class="dt pt dlterm"><samp class="ph codeph">-t 
              <var class="keyword varname">portsfile</var></samp> 
          </dt>
 
          <dd class="dd pd">File with list of local HFI ports used to access fabric(s) for
            analysis. Default is 
            <span class="ph filepath">/etc/sysconfig/opa/ports</span> file. 
          </dd>
 
         
         
          <dt class="dt pt dlterm"><samp class="ph codeph">-p 
              <var class="keyword varname">ports</var></samp> 
          </dt>
 
          <dd class="dd pd"> 
            <p class="p">List of local 
              <span class="ph">HFI</span> ports used to access fabric(s)
              for analysis. Default is first active port. The first 
              <span class="ph">HFI</span> in the system is 1. The first
              port on an 
              <span class="ph">HFI</span> is 1. 
            </p>
 
            <p class="p">Uses the format 
              <samp class="ph codeph">hfi:port</samp>, for example: 
            </p>
 
            <a name="GUID-50AADE23-2E06-4177-AFDE-520CE997B1C1__GUID-A8958A2D-DFFF-4F65-A112-54B232CFEFF9"><!-- --></a><dl class="dl parml" id="GUID-50AADE23-2E06-4177-AFDE-520CE997B1C1__GUID-A8958A2D-DFFF-4F65-A112-54B232CFEFF9"> 
               
                <dt class="dt pt dlterm"><samp class="ph codeph">0:0</samp> 
                </dt>
 
                <dd class="dd pd"> 
                  <p class="p">First active port in system. 
                  </p>
 
                </dd>
 
               
               
                <dt class="dt pt dlterm"><samp class="ph codeph">0:y</samp> 
                </dt>
 
                <dd class="dd pd"> 
                  <p class="p">Port 
                    <samp class="ph codeph"><var class="keyword varname">y</var></samp> within system. 
                  </p>
 
                </dd>
 
               
               
                <dt class="dt pt dlterm"><samp class="ph codeph">x:0</samp> 
                </dt>
 
                <dd class="dd pd"> 
                  <p class="p">First active port on HFI 
                    <samp class="ph codeph"><var class="keyword varname">x</var></samp>. 
                  </p>
 
                </dd>
 
               
               
                <dt class="dt pt dlterm"><samp class="ph codeph">x:y</samp> 
                </dt>
 
                <dd class="dd pd"> 
                  <p class="p">HFI 
                    <samp class="ph codeph"><var class="keyword varname">x</var></samp>, port 
                    <samp class="ph codeph"><var class="keyword varname">y</var></samp>. 
                  </p>
 
                </dd>
 
               
            </dl>
 
          </dd>
 
         
      </dl>
 
    </div>
 
    <div class="section" id="GUID-50AADE23-2E06-4177-AFDE-520CE997B1C1__XX1128891"><a name="GUID-50AADE23-2E06-4177-AFDE-520CE997B1C1__XX1128891"><!-- --></a><h2 class="sectiontitle">Environment Variables </h2> 
      <p class="p">The following environment variables are also used by this command: 
      </p>
 
      <a name="GUID-50AADE23-2E06-4177-AFDE-520CE997B1C1__GUID-A4B4E4A1-D8FF-4C2A-B91F-34BBD20C9665"><!-- --></a><dl class="dl parml" id="GUID-50AADE23-2E06-4177-AFDE-520CE997B1C1__GUID-A4B4E4A1-D8FF-4C2A-B91F-34BBD20C9665"> 
         
          <dt class="dt pt dlterm"><span class="keyword parmname">PORTS</span> 
          </dt>
 
          <dd class="dd pd">List of ports, used in absence of 
            <samp class="ph codeph">-t</samp> and 
            <samp class="ph codeph">-p</samp>. 
          </dd>
 
         
         
          <dt class="dt pt dlterm"><span class="keyword parmname">PORTS_FILE</span> 
          </dt>
 
          <dd class="dd pd"> 
            <p class="p">File containing list of ports, used in absence of 
              <samp class="ph codeph">-t</samp> and 
              <samp class="ph codeph">-p</samp>. 
            </p>
 
            <p class="p">For simple fabrics, the 
              <span class="ph">Intel<sup>®</sup> Omni-Path
          Fabric Suite FastFabric</span> Toolset host is connected to a single
              fabric. By default, the first active port on the 
              <span class="ph">FastFabric</span> Toolset host is used to
              analyze the fabric. However, in more complex fabrics, the 
              <span class="ph">FastFabric</span> Toolset host may be
              connected to more than one fabric or subnet. In this case, you can specify the
              ports or HFIs to use with one of the following methods: 
            </p>
 
            <a name="GUID-50AADE23-2E06-4177-AFDE-520CE997B1C1__UL_C0A400E814EB4FDAA1CACB385D8C509B"><!-- --></a><ul class="ul" id="GUID-50AADE23-2E06-4177-AFDE-520CE997B1C1__UL_C0A400E814EB4FDAA1CACB385D8C509B"> 
              <li class="li" id="GUID-50AADE23-2E06-4177-AFDE-520CE997B1C1__LI_45D02F7132064EB3A94B7B6E9689CC8D"><a name="GUID-50AADE23-2E06-4177-AFDE-520CE997B1C1__LI_45D02F7132064EB3A94B7B6E9689CC8D"><!-- --></a>On the command line
                using the 
                <samp class="ph codeph">-p</samp> option. 
              </li>
 
              <li class="li" id="GUID-50AADE23-2E06-4177-AFDE-520CE997B1C1__LI_3685619C53E44CBFAB2C79F8AF43E7A7"><a name="GUID-50AADE23-2E06-4177-AFDE-520CE997B1C1__LI_3685619C53E44CBFAB2C79F8AF43E7A7"><!-- --></a>In a file specified
                using the 
                <samp class="ph codeph">-t</samp> option. 
              </li>
 
              <li class="li" id="GUID-50AADE23-2E06-4177-AFDE-520CE997B1C1__LI_6C661E6935F741C4A365AF6BCB313B3A"><a name="GUID-50AADE23-2E06-4177-AFDE-520CE997B1C1__LI_6C661E6935F741C4A365AF6BCB313B3A"><!-- --></a>Through the
                environment variables 
                <span class="keyword parmname">PORTS</span> or 
                <span class="keyword parmname">PORTS_FILE</span>. 
              </li>
 
              <li class="li" id="GUID-50AADE23-2E06-4177-AFDE-520CE997B1C1__LI_196476A33FEB4E5692D0B0AF0530A5D3"><a name="GUID-50AADE23-2E06-4177-AFDE-520CE997B1C1__LI_196476A33FEB4E5692D0B0AF0530A5D3"><!-- --></a>Using the 
                <samp class="ph codeph">ports_file</samp> configuration option in 
                <span class="ph filepath">opafastfabric.conf</span>. 
              </li>
 
            </ul>
 
            <p class="p">If the specified port does not exist or is empty, the first
              active port on the local system is used. In more complex configurations, you
              must specify the exact ports to use for all fabrics to be analyzed. 
            </p>
 
            <p class="p"></p>
 
          </dd>
 
         
      </dl>
 
    </div>
 
    <div class="section" id="GUID-50AADE23-2E06-4177-AFDE-520CE997B1C1__XX1146890"><a name="GUID-50AADE23-2E06-4177-AFDE-520CE997B1C1__XX1146890"><!-- --></a><h2 class="sectiontitle">Example </h2> 
      <pre class="pre codeblock">opafabricinfo
opafabricinfo -p '1:1 2:1'</pre>
 
      <p class="p"><strong class="ph b">Output example 
        </strong> 
      </p>
 
      <pre class="pre codeblock"># opafabricinfo
Fabric 0:0 Information:
SM: hds1fnb6241 hfi1_0 Guid: 0x0011750101575ffe State: Master
Number of HFIs: 8
Number of Switches: 1
Number of Links: 8
Number of HFI Links: 8              (Internal: 0   External: 8)
Number of ISLs: 0                   (Internal: 0   External: 0)
Number of Degraded Links: 0         (HFI Links: 0   ISLs: 0)
Number of Omitted Links: 0          (HFI Links: 0   ISLs: 0)</pre>
 
    </div>
 
    </div>
 
<div xmlns:xs="http://www.w3.org/2001/XMLSchema" id="custom-footer"><hr><p class="copyright-notice">*Other names and brands may be claimed as the property of others.</p><p class="copyright-notice">Revised: January 2016</p><p class="copyright-notice">Copyright © 2016 Intel Corporation. All rights reserved.</p></div>
</body>
</html>