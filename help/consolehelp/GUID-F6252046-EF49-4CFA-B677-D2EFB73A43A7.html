<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us">
<head xmlns:xs="http://www.w3.org/2001/XMLSchema"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="DC.Type" content="reference">
<meta name="DC.Title" content="opalinkanalysis">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="GUID-F6252046-EF49-4CFA-B677-D2EFB73A43A7">
<meta name="DC.Language" content="en-US">
<link rel="stylesheet" type="text/css" href="commonltr.css">
<link rel="stylesheet" type="text/css" href="intelltr.css">
<title>opalinkanalysis</title>
</head>
<body class="man8" id="GUID-F6252046-EF49-4CFA-B677-D2EFB73A43A7"><a name="GUID-F6252046-EF49-4CFA-B677-D2EFB73A43A7"><!-- --></a>
<div id="custom-header" style="text-align:right">
	<img src="intel_logo.png">
</div>
 
  <h1 class="title topictitle1">opalinkanalysis</h1>
 
  <div class="body refbody"> 
    <div class="section" id="GUID-F6252046-EF49-4CFA-B677-D2EFB73A43A7__GUID-230691C9-9AAC-496B-BCB6-789A826A5BF0"><a name="GUID-F6252046-EF49-4CFA-B677-D2EFB73A43A7__GUID-230691C9-9AAC-496B-BCB6-789A826A5BF0"><!-- --></a> 
      <p class="p"><strong class="ph b">(Switch)</strong> Encapsulates the capabilities for link analysis.
        Additionally, this tool includes cable and fabric topology verification
        capabilities. This tool is built on top of 
        <samp class="ph codeph">opareport</samp> (and its analysis capabilities), and accepts
        the same syntax for input topology and snapshot files. 
      </p>
 
      <p class="p">In addition to being able to run assorted 
        <samp class="ph codeph">opareport</samp> link analysis reports, and generate
        human-readable output, this tool additionally analyzes the results and appends
        a concise summary of issues found to the 
        <span class="ph filepath">FF_RESULT_DIR/punchlist.csv</span> file. 
      </p>
 
    </div>
 
    <div class="section refsyn" id="GUID-F6252046-EF49-4CFA-B677-D2EFB73A43A7__GUID-9A8037E8-F5A8-4B90-ADAE-F3ABBA651C60"><a name="GUID-F6252046-EF49-4CFA-B677-D2EFB73A43A7__GUID-9A8037E8-F5A8-4B90-ADAE-F3ABBA651C60"><!-- --></a><h2 class="sectiontitle">Syntax</h2> 
      <pre class="pre codeblock">opalinkanalysis [-U] [-t <var class="keyword varname">portsfile</var>] [-p <var class="keyword varname">ports</var>]
 [-T <var class="keyword varname">topology_input</var>] [-X <var class="keyword varname">snapshot_input</var>] 
[-x <var class="keyword varname">snapshot_suffix</var>] [-c <var class="keyword varname">file</var>] reports ...</pre>
 
      <p class="p">or 
      </p>
 
      <pre class="pre codeblock">opalinkanalysis --help</pre>
 
    </div>
 
    <div class="section" id="GUID-F6252046-EF49-4CFA-B677-D2EFB73A43A7__GUID-519F4EF8-3674-456E-A3A3-F0BA1C257475"><a name="GUID-F6252046-EF49-4CFA-B677-D2EFB73A43A7__GUID-519F4EF8-3674-456E-A3A3-F0BA1C257475"><!-- --></a><h2 class="sectiontitle">Options</h2> 
      <a name="GUID-F6252046-EF49-4CFA-B677-D2EFB73A43A7__GUID-871DE0E7-9565-4A4D-A110-3B8DB8721B3E"><!-- --></a><dl class="dl parml" id="GUID-F6252046-EF49-4CFA-B677-D2EFB73A43A7__GUID-871DE0E7-9565-4A4D-A110-3B8DB8721B3E"> 
         
          <dt class="dt pt dlterm"><samp class="ph codeph">--help</samp> 
          </dt>
 
          <dd class="dd pd"> 
            <p class="p">Produces full help text. 
            </p>
 
          </dd>
 
         
         
          <dt class="dt pt dlterm"><samp class="ph codeph">-U</samp> 
          </dt>
 
          <dd class="dd pd"> 
            <p class="p">Omits unexpected devices and links in 
              <span class="ph filepath">punchlist</span> file from verify reports. 
            </p>
 
          </dd>
 
         
         
          <dt class="dt pt dlterm"><samp class="ph codeph">-t 
              <var class="keyword varname">portsfile</var></samp> 
          </dt>
 
          <dd class="dd pd"> 
            <p class="p">File with list of local HFI ports used to access fabric(s) for
              analysis, default is 
              <span class="ph filepath">/etc/sysconfig/opa/ports</span>. 
            </p>
 
          </dd>
 
         
         
          <dt class="dt pt dlterm"><samp class="ph codeph">-p 
              <var class="keyword varname">ports</var></samp> 
          </dt>
 
          <dd class="dd pd"> 
            <p class="p">List of local HFI ports used to access fabric(s) for analysis.
              The default is the first active port. The first HFI in the system is 1. The
              first port on an HFI is 1. 
            </p>
 
            <p class="p">Uses the format 
              <samp class="ph codeph">hfi:port</samp>, for example: 
            </p>
 
            <a name="GUID-F6252046-EF49-4CFA-B677-D2EFB73A43A7__GUID-A8958A2D-DFFF-4F65-A112-54B232CFEFF9"><!-- --></a><dl class="dl parml" id="GUID-F6252046-EF49-4CFA-B677-D2EFB73A43A7__GUID-A8958A2D-DFFF-4F65-A112-54B232CFEFF9"> 
               
                <dt class="dt pt dlterm"><samp class="ph codeph">0:0</samp> 
                </dt>
 
                <dd class="dd pd"> 
                  <p class="p">First active port in system. 
                  </p>
 
                </dd>
 
               
               
                <dt class="dt pt dlterm"><samp class="ph codeph">0:y</samp> 
                </dt>
 
                <dd class="dd pd"> 
                  <p class="p">Port 
                    <samp class="ph codeph"><var class="keyword varname">y</var></samp> within system. 
                  </p>
 
                </dd>
 
               
               
                <dt class="dt pt dlterm"><samp class="ph codeph">x:0</samp> 
                </dt>
 
                <dd class="dd pd"> 
                  <p class="p">First active port on HFI 
                    <samp class="ph codeph"><var class="keyword varname">x</var></samp>. 
                  </p>
 
                </dd>
 
               
               
                <dt class="dt pt dlterm"><samp class="ph codeph">x:y</samp> 
                </dt>
 
                <dd class="dd pd"> 
                  <p class="p">HFI 
                    <samp class="ph codeph"><var class="keyword varname">x</var></samp>, port 
                    <samp class="ph codeph"><var class="keyword varname">y</var></samp>. 
                  </p>
 
                </dd>
 
               
            </dl>
 
          </dd>
 
         
         
          <dt class="dt pt dlterm"><samp class="ph codeph">-T 
              <var class="keyword varname">topology_input</var></samp> 
          </dt>
 
          <dd class="dd pd"> 
            <p class="p">Name of a topology input file to use. Any &nbsp;<samp class="ph codeph">%P</samp>
              markers in this filename are replaced with the 
              <samp class="ph codeph">hfi:port</samp> being operated on (such as 0:0 or 1:2).
              Default is 
              <span class="ph filepath">/etc/sysconfig/opa/topology.%P.xml</span>. If 
              <samp class="ph codeph">NONE</samp> is specified, does not use any 
              <span class="ph filepath">topology_input</span> files. See 
              <a class="xref" href="GUID-03910E5A-245C-4F29-A84D-5D9872BBE30C.html#GUID-03910E5A-245C-4F29-A84D-5D9872BBE30C">opareport</a>
              for more information on 
              <span class="ph filepath">topology_input</span> files. 
            </p>
 
          </dd>
 
         
         
          <dt class="dt pt dlterm"><samp class="ph codeph">-X 
              <var class="keyword varname">snapshot_input</var></samp> 
          </dt>
 
          <dd class="dd pd"> 
            <p class="p">Performs analysis using data in 
              <span class="ph filepath"><var class="keyword varname">snapshot_input</var></span>. 
              <span class="ph filepath"><var class="keyword varname">snapshot_input</var></span> must have
              been generated via a previous 
              <samp class="ph codeph">opareport -o snapshot</samp> run. If an errors report
              is specified, snapshot must have been generated with the 
              <samp class="ph codeph">opareport -s</samp> option. When this option is used,
              only one port may be specified to select a 
              <span class="ph filepath">topology_input</span> file (unless 
              <samp class="ph codeph">-T</samp> specified). When this option is used, 
              <samp class="ph codeph">clearerrors</samp> and 
              <samp class="ph codeph">clearhwerrors</samp> reports are not permitted. 
            </p>
 
          </dd>
 
         
         
          <dt class="dt pt dlterm"><samp class="ph codeph">-x 
              <var class="keyword varname">snapshot_suffix</var></samp> 
          </dt>
 
          <dd class="dd pd"> 
            <p class="p">Creates a snapshot file per selected port. The files are created
              in 
              <span class="ph filepath">FF_RESULT_DIR</span> with names of the form: 
              <span class="ph filepath">snapshotSUFFIX.<var class="keyword varname">HFI:PORT</var>.xml</span>.
              
            </p>
 
          </dd>
 
         
         
          <dt class="dt pt dlterm"><samp class="ph codeph">-c 
              <var class="keyword varname">file</var></samp> 
          </dt>
 
          <dd class="dd pd"> 
            <p class="p">Error thresholds configuration file. The default is 
              <span class="ph filepath">/etc/sysconfig/opa/opamon.si.conf</span>. 
            </p>
 
          </dd>
 
         
         
          <dt class="dt pt dlterm"><samp class="ph codeph"><var class="keyword varname">reports</var></samp> 
          </dt>
 
          <dd class="dd pd"> 
            <div class="p">The following reports are supported: 
              <a name="GUID-F6252046-EF49-4CFA-B677-D2EFB73A43A7__GUID-22AB3F39-321F-4754-8687-C09BC6184344"><!-- --></a><dl class="dl parml" id="GUID-F6252046-EF49-4CFA-B677-D2EFB73A43A7__GUID-22AB3F39-321F-4754-8687-C09BC6184344"> 
                 
                  <dt class="dt pt dlterm"><samp class="ph codeph">errors</samp> 
                  </dt>
 
                  <dd class="dd pd"> 
                    <p class="p">Link error analysis. 
                    </p>
 
                  </dd>
 
                 
                 
                  <dt class="dt pt dlterm"><samp class="ph codeph">slowlinks</samp> 
                  </dt>
 
                  <dd class="dd pd"> 
                    <p class="p">Links running slower than expected. 
                    </p>
 
                  </dd>
 
                 
                 
                  <dt class="dt pt dlterm"><samp class="ph codeph">misconfiglinks</samp> 
                  </dt>
 
                  <dd class="dd pd"> 
                    <p class="p">Links configured to run slower than supported. 
                    </p>
 
                  </dd>
 
                 
                 
                  <dt class="dt pt dlterm"><samp class="ph codeph">misconnlinks</samp> 
                  </dt>
 
                  <dd class="dd pd"> 
                    <p class="p">Links connected with mismatched speed potential. 
                    </p>
 
                  </dd>
 
                 
                 
                  <dt class="dt pt dlterm"><samp class="ph codeph">all</samp> 
                  </dt>
 
                  <dd class="dd pd"> 
                    <p class="p">Includes all reports above. (<samp class="ph codeph">errors</samp>, 
                      <samp class="ph codeph">slowlinks</samp>, 
                      <samp class="ph codeph">misconfiglinks</samp>, and 
                      <samp class="ph codeph">misconnlinks</samp>) 
                    </p>
 
                    </dd>
 
                 
                 
                  <dt class="dt pt dlterm"><samp class="ph codeph">verifylinks</samp> 
                  </dt>
 
                  <dd class="dd pd"> 
                    <p class="p">Verifies links against topology input. 
                    </p>
 
                  </dd>
 
                 
                 
                  <dt class="dt pt dlterm"><samp class="ph codeph">verifyextlinks</samp> 
                  </dt>
 
                  <dd class="dd pd"> 
                    <p class="p">Verifies links against topology input. Limit analysis to
                      links external to systems. 
                    </p>
 
                  </dd>
 
                 
                 
                  <dt class="dt pt dlterm"><samp class="ph codeph">verifyfis</samp> 
                  </dt>
 
                  <dd class="dd pd"> 
                    <p class="p">Verifies FIs against topology input. 
                    </p>
 
                  </dd>
 
                 
                 
                  <dt class="dt pt dlterm"><samp class="ph codeph">verifysws</samp> 
                  </dt>
 
                  <dd class="dd pd">Verifies switches against topology input. 
                  </dd>
 
                 
                 
                  <dt class="dt pt dlterm"><samp class="ph codeph">verifyrtrs</samp> 
                  </dt>
 
                  <dd class="dd pd"> 
                    <p class="p">Verifies routers against topology input. 
                    </p>
 
                  </dd>
 
                 
                 
                  <dt class="dt pt dlterm"><samp class="ph codeph">verifynodes</samp> 
                  </dt>
 
                  <dd class="dd pd"> 
                    <p class="p">Verifies FIs, switches, and routers against topology
                      input. 
                    </p>
 
                  </dd>
 
                 
                 
                  <dt class="dt pt dlterm"><samp class="ph codeph">verifysms</samp> 
                  </dt>
 
                  <dd class="dd pd"> 
                    <p class="p">Verifies SMs against topology input. 
                    </p>
 
                  </dd>
 
                 
                 
                  <dt class="dt pt dlterm"><samp class="ph codeph">verifyall</samp> 
                  </dt>
 
                  <dd class="dd pd"> 
                    <p class="p">Verifies links, FIs, switches, routers, and SMs against
                      topology input. 
                    </p>
 
                  </dd>
 
                 
                 
                  <dt class="dt pt dlterm"><samp class="ph codeph">clearerrors</samp> 
                  </dt>
 
                  <dd class="dd pd"> 
                    <p class="p">Clears error counters, uses PM if available. 
                    </p>
 
                  </dd>
 
                 
                 
                  <dt class="dt pt dlterm"><samp class="ph codeph">clearhwerrors</samp> 
                  </dt>
 
                  <dd class="dd pd"> 
                    <p class="p">Clears hardware error counters, bypasses PM. 
                    </p>
 
                  </dd>
 
                 
                 
                  <dt class="dt pt dlterm"><samp class="ph codeph">clear</samp> 
                  </dt>
 
                  <dd class="dd pd"> 
                    <p class="p">Includes 
                      <samp class="ph codeph">clearerrors</samp> and 
                      <samp class="ph codeph">clearhwerrors</samp>. 
                    </p>
 
                  </dd>
 
                 
              </dl>
 
            </div>
 
          </dd>
 
         
      </dl>
 
      <p class="p">A punchlist of bad links is also appended to the file: 
        <span class="ph filepath">FF_RESULT_DIR/punchlist.csv</span> 
      </p>
 
    </div>
 
    <div class="section" id="GUID-F6252046-EF49-4CFA-B677-D2EFB73A43A7__GUID-1A37F281-18DD-49BF-A0F0-ED7AF217C717"><a name="GUID-F6252046-EF49-4CFA-B677-D2EFB73A43A7__GUID-1A37F281-18DD-49BF-A0F0-ED7AF217C717"><!-- --></a><h2 class="sectiontitle">Examples </h2> 
      <pre class="pre codeblock">opalinkanalysis errors
opalinkanalysis errors clearerrors 
opalinkanalysis -p '1:1 2:1'</pre>
 
    </div>
 
    <div class="section" id="GUID-F6252046-EF49-4CFA-B677-D2EFB73A43A7__GUID-B8D84587-B1DA-4ED0-9FDD-9CEDE5359E5A"><a name="GUID-F6252046-EF49-4CFA-B677-D2EFB73A43A7__GUID-B8D84587-B1DA-4ED0-9FDD-9CEDE5359E5A"><!-- --></a><h2 class="sectiontitle">Environment Variables</h2> 
      <p class="p">The following environment variables are also used by this command: 
      </p>
 
      <a name="GUID-F6252046-EF49-4CFA-B677-D2EFB73A43A7__GUID-CF4C5CB9-90F3-4FD6-A7AA-BDFD205A541E"><!-- --></a><dl class="dl parml" id="GUID-F6252046-EF49-4CFA-B677-D2EFB73A43A7__GUID-CF4C5CB9-90F3-4FD6-A7AA-BDFD205A541E"> 
         
          <dt class="dt pt dlterm"><span class="keyword parmname">PORTS</span> 
          </dt>
 
          <dd class="dd pd"> 
            <p class="p">List of ports, used in absence of 
              <samp class="ph codeph">-t</samp> and 
              <samp class="ph codeph">-p</samp>. 
            </p>
 
          </dd>
 
         
         
          <dt class="dt pt dlterm"><span class="keyword parmname">PORTS_FILE</span> 
          </dt>
 
          <dd class="dd pd"> 
            <p class="p">File containing list of ports, used in absence of 
              <samp class="ph codeph">-t</samp> and 
              <samp class="ph codeph">-p</samp>. 
            </p>
 
          </dd>
 
         
         
          <dt class="dt pt dlterm"><span class="keyword parmname">FF_TOPOLOGY_FILE</span> 
          </dt>
 
          <dd class="dd pd"> 
            <p class="p">File containing 
              <samp class="ph codeph"><var class="keyword varname">topology_input</var></samp>, used in
              absence of 
              <samp class="ph codeph">-T</samp>. 
            </p>
 
          </dd>
 
         
      </dl>
 
    </div>
 
  </div>
 
<div xmlns:xs="http://www.w3.org/2001/XMLSchema" id="custom-footer"><hr><p class="copyright-notice">*Other names and brands may be claimed as the property of others.</p><p class="copyright-notice">Revised: January 2016</p><p class="copyright-notice">Copyright © 2016 Intel Corporation. All rights reserved.</p></div>
</body>
</html>