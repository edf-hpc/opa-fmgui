<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us">
<head xmlns:xs="http://www.w3.org/2001/XMLSchema"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="copyright" content="(C) Copyright 2005">
<meta name="DC.rights.owner" content="(C) Copyright 2005">
<meta name="DC.Type" content="reference">
<meta name="DC.Title" content="opagenswitches">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="GUID-F36528CA-A55C-476F-953D-CD28F4B73924">
<meta name="DC.Language" content="en-US">
<link rel="stylesheet" type="text/css" href="commonltr.css">
<link rel="stylesheet" type="text/css" href="intelltr.css">
<title>opagenswitches</title>
</head>
<body class="man8" id="GUID-F36528CA-A55C-476F-953D-CD28F4B73924"><a name="GUID-F36528CA-A55C-476F-953D-CD28F4B73924"><!-- --></a>
<div id="custom-header" style="text-align:right">
	<img src="intel_logo.png">
</div>
 
  <h1 class="title topictitle1">opagenswitches</h1>
 
  <div class="body refbody"> 
    <div class="section" id="GUID-F36528CA-A55C-476F-953D-CD28F4B73924__GUID-B6FEE4D9-F50E-4433-B87C-A1EF47A04B6D"><a name="GUID-F36528CA-A55C-476F-953D-CD28F4B73924__GUID-B6FEE4D9-F50E-4433-B87C-A1EF47A04B6D"><!-- --></a> 
      <p class="p">Analyzes the present fabric and produces a list of Externally Managed
        switches in the required format for the 
        <span class="ph filepath">/etc/sysconfig/opa/switches</span> file. 
      </p>
 
    </div>
 
    <div class="section refsyn" id="GUID-F36528CA-A55C-476F-953D-CD28F4B73924__GUID-49CBD852-7A86-4998-BCD4-DC6461D4023E"><a name="GUID-F36528CA-A55C-476F-953D-CD28F4B73924__GUID-49CBD852-7A86-4998-BCD4-DC6461D4023E"><!-- --></a><h2 class="sectiontitle">Syntax </h2> 
      <pre class="pre codeblock">opagenswitches [-t portsfile] [-p ports] [-R] [-L switches_file] [-o output_file] 
[-T topology_file] [-X snapshot_file] [-s] [-v level] [-K]</pre>
 
      <p class="p">or 
      </p>
 
      <pre class="pre codeblock">opagenswitches --help</pre>
 
    </div>
 
    <div class="section" id="GUID-F36528CA-A55C-476F-953D-CD28F4B73924__XX1203791"><a name="GUID-F36528CA-A55C-476F-953D-CD28F4B73924__XX1203791"><!-- --></a><h2 class="sectiontitle">Options </h2> 
      <a name="GUID-F36528CA-A55C-476F-953D-CD28F4B73924__GUID-D5211FAD-8DB3-4158-BE94-327F2ED4650E"><!-- --></a><dl class="dl parml" id="GUID-F36528CA-A55C-476F-953D-CD28F4B73924__GUID-D5211FAD-8DB3-4158-BE94-327F2ED4650E"> 
         
          <dt class="dt pt dlterm"><samp class="ph codeph">--help</samp> 
          </dt>
 
          <dd class="dd pd">Produces full help text. 
          </dd>
 
         
         
          <dt class="dt pt dlterm"><samp class="ph codeph">-t 
              <var class="keyword varname">portsfile</var></samp> 
          </dt>
 
          <dd class="dd pd">File with list of local HFI ports used to access fabric(s) for
            analysis. Default is 
            <span class="ph filepath">/etc/sysconfig/opa/ports</span> file. 
          </dd>
 
         
         
          <dt class="dt pt dlterm"><samp class="ph codeph">-p 
              <var class="keyword varname">ports</var></samp> 
          </dt>
 
          <dd class="dd pd"> 
            <p class="p">List of local 
              <span class="ph">HFI</span> ports used to access fabrics for
              counter clear. Default is first active port. The first 
              <span class="ph">HFI</span> in the system is 1. The first
              port on an 
              <span class="ph">HFI</span> is 1. 
            </p>
 
            <p class="p">Uses the format 
              <samp class="ph codeph">hfi:port</samp>, for example: 
            </p>
 
            <a name="GUID-F36528CA-A55C-476F-953D-CD28F4B73924__GUID-A8958A2D-DFFF-4F65-A112-54B232CFEFF9"><!-- --></a><dl class="dl parml" id="GUID-F36528CA-A55C-476F-953D-CD28F4B73924__GUID-A8958A2D-DFFF-4F65-A112-54B232CFEFF9"> 
               
                <dt class="dt pt dlterm"><samp class="ph codeph">0:0</samp> 
                </dt>
 
                <dd class="dd pd"> 
                  <p class="p">First active port in system. 
                  </p>
 
                </dd>
 
               
               
                <dt class="dt pt dlterm"><samp class="ph codeph">0:y</samp> 
                </dt>
 
                <dd class="dd pd"> 
                  <p class="p">Port 
                    <samp class="ph codeph"><var class="keyword varname">y</var></samp> within system. 
                  </p>
 
                </dd>
 
               
               
                <dt class="dt pt dlterm"><samp class="ph codeph">x:0</samp> 
                </dt>
 
                <dd class="dd pd"> 
                  <p class="p">First active port on HFI 
                    <samp class="ph codeph"><var class="keyword varname">x</var></samp>. 
                  </p>
 
                </dd>
 
               
               
                <dt class="dt pt dlterm"><samp class="ph codeph">x:y</samp> 
                </dt>
 
                <dd class="dd pd"> 
                  <p class="p">HFI 
                    <samp class="ph codeph"><var class="keyword varname">x</var></samp>, port 
                    <samp class="ph codeph"><var class="keyword varname">y</var></samp>. 
                  </p>
 
                </dd>
 
               
            </dl>
 
          </dd>
 
         
         
          <dt class="dt pt dlterm"><samp class="ph codeph">-R</samp> 
          </dt>
 
          <dd class="dd pd">Does not attempt to get routes for computation of distance. 
          </dd>
 
         
         
          <dt class="dt pt dlterm"><samp class="ph codeph">-s</samp> 
          </dt>
 
          <dd class="dd pd">Updates/resolves switch names using topology XML data. 
          </dd>
 
         
         
          <dt class="dt pt dlterm"><samp class="ph codeph">-L 
              <var class="keyword varname">switches_file</var></samp> 
          </dt>
 
          <dd class="dd pd"> 
            <p class="p">Specifies the name of a pre-existing 
              <samp class="ph codeph"><var class="keyword varname">switches_file</var></samp> to be used as
              input in conjunction with a topology file. When specified, the file is used
              instead of switches data obtained from the actual fabric. The updated switches
              data is output to stdout (common to all 
              <samp class="ph codeph">opagenswitches</samp> operations). Does not generate
              switches data; must also use 
              <samp class="ph codeph">-s</samp> option. 
            </p>
 
          </dd>
 
         
         
          <dt class="dt pt dlterm"><samp class="ph codeph">-o 
              <var class="keyword varname">output_file</var></samp> 
          </dt>
 
          <dd class="dd pd">Writes switches data to 
            <samp class="ph codeph"><var class="keyword varname">output_file</var></samp>. Default is stdout.
            
          </dd>
 
         
         
          <dt class="dt pt dlterm"><samp class="ph codeph">-T 
              <var class="keyword varname">topology_file</var></samp> 
          </dt>
 
          <dd class="dd pd"> 
            <p class="p">Specifies 
              <samp class="ph codeph"><var class="keyword varname">topology_file</var></samp> to use. May
              contain 
              <samp class="ph codeph">'%P'</samp>. Must also use 
              <samp class="ph codeph">-s</samp>. 
            </p>
 
            <p class="p">Link data in the topology file is compared to actual fabric link
              data (obtained by 
              <samp class="ph codeph">opareport -o links</samp> or 
              <samp class="ph codeph">opareport -X snapshot -o links</samp>). The data is
              also matched to a list of switch node GUIDs and the switch NodeDesc values are
              generated. This list is then applied to the switches data to update NodeDesc
              values. The comparison of topology link data to actual fabric link data starts
              with the host names. The host names in the actual fabric must match those in
              the topology file for the comparison to succeed. However, the comparison logic
              allows for some mismatches, which could be due to swapped or missing cables.
              Switch NodeDesc values are matched to GUIDs based on which switch has the
              greater number of matching links. 
            </p>
 
          </dd>
 
         
         
          <dt class="dt pt dlterm"><samp class="ph codeph">-X 
              <var class="keyword varname">snapshot_file</var></samp> 
          </dt>
 
          <dd class="dd pd">Uses 
            <samp class="ph codeph"><var class="keyword varname">snapshot_file</var></samp> XML for fabric
            link information. 
          </dd>
 
         
         
          <dt class="dt pt dlterm"><samp class="ph codeph">-v 
              <var class="keyword varname">level</var></samp> 
          </dt>
 
          <dd class="dd pd">Verbose level. Default = 0. Values include: 
            <a name="GUID-F36528CA-A55C-476F-953D-CD28F4B73924__GUID-B271FA7B-2145-4826-B893-AC200730FF46"><!-- --></a><dl class="dl parml" id="GUID-F36528CA-A55C-476F-953D-CD28F4B73924__GUID-B271FA7B-2145-4826-B893-AC200730FF46"> 
               
                <dt class="dt pt dlterm"><samp class="ph codeph">0</samp> 
                </dt>
 
                <dd class="dd pd">No output. 
                </dd>
 
               
               
                <dt class="dt pt dlterm"><samp class="ph codeph">1</samp> 
                </dt>
 
                <dd class="dd pd">Progress output. 
                </dd>
 
               
               
                <dt class="dt pt dlterm"><samp class="ph codeph">2</samp> 
                </dt>
 
                <dd class="dd pd">Reserved. 
                </dd>
 
               
               
                <dt class="dt pt dlterm"><samp class="ph codeph">4</samp> 
                </dt>
 
                <dd class="dd pd">Time stamps. 
                </dd>
 
               
               
                <dt class="dt pt dlterm"><samp class="ph codeph">8</samp> 
                </dt>
 
                <dd class="dd pd">Reserved. 
                </dd>
 
               
            </dl>
 
          </dd>
 
         
         
          <dt class="dt pt dlterm"><samp class="ph codeph">-K 
            </samp> 
          </dt>
 
          <dd class="dd pd"> 
            <p class="p">Does not clean temporary files. Temporary files are CSV format
              and contain lists of links used during script operation. The files are not
              normally needed after execution, but they can be retained for subsequent
              inspection or processing. 
            </p>
 
          </dd>
 
         
      </dl>
 
    </div>
 
    <div class="section" id="GUID-F36528CA-A55C-476F-953D-CD28F4B73924__XX1171870"><a name="GUID-F36528CA-A55C-476F-953D-CD28F4B73924__XX1171870"><!-- --></a><h2 class="sectiontitle">Environment </h2> 
      <a name="GUID-F36528CA-A55C-476F-953D-CD28F4B73924__GUID-F1EABD1C-1363-4679-AC6B-849310F244F3"><!-- --></a><dl class="dl parml" id="GUID-F36528CA-A55C-476F-953D-CD28F4B73924__GUID-F1EABD1C-1363-4679-AC6B-849310F244F3"> 
         
          <dt class="dt pt dlterm"><span class="keyword parmname">PORTS</span> 
          </dt>
 
          <dd class="dd pd">List of ports, used in absence of 
            <samp class="ph codeph">-t</samp> and 
            <samp class="ph codeph">-p</samp>. 
          </dd>
 
         
         
          <dt class="dt pt dlterm"><span class="keyword parmname">PORTS_FILE</span> 
          </dt>
 
          <dd class="dd pd">File containing list of ports, used in absence of 
            <samp class="ph codeph">-t</samp> and 
            <samp class="ph codeph">-p</samp>. 
          </dd>
 
         
         
          <dt class="dt pt dlterm"><span class="keyword parmname">FF_TOPOLOGY_FILE</span> 
          </dt>
 
          <dd class="dd pd">File containing topology XML data, used in absence of 
            <samp class="ph codeph">-T</samp>. 
          </dd>
 
         
      </dl>
 
    </div>
 
    <div class="section" id="GUID-F36528CA-A55C-476F-953D-CD28F4B73924__XX1172623"><a name="GUID-F36528CA-A55C-476F-953D-CD28F4B73924__XX1172623"><!-- --></a><h2 class="sectiontitle">Examples </h2> 
      <pre class="pre codeblock">opagenswitches
opagenswitches -p '1:1 2:1'
opagenswitches -o switches
opagenswitches -s -o switches
opagenswitches -L switches -s -o switches
opagenswitches -s -T topology.%P.xml
opagenswitches -L switches -s -T topology.%P.xml -X snapshot.%P.xml</pre>
 
    </div>
 
  </div>
 
<div xmlns:xs="http://www.w3.org/2001/XMLSchema" id="custom-footer"><hr><p class="copyright-notice">*Other names and brands may be claimed as the property of others.</p><p class="copyright-notice">Revised: January 2016</p><p class="copyright-notice">Copyright © 2016 Intel Corporation. All rights reserved.</p></div>
</body>
</html>